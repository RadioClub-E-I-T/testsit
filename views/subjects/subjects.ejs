<div class="content">
    <p class="title is-1">Asignaturas de <%=subjects[0].course%>º</p>

    <% if (itinerary) { %>
        <% if (itinerary === 'sist') { %>
            <p class="subtitle is-2">Sistemas de Telecomunicación</p>
        <% } else if (itinerary === 'elect') { %>
            <p class="subtitle is-2">Sistemas Electrónicos</p>
        <% } else if (itinerary === 'telem') { %>
            <p class="subtitle is-2">Sistemas Telemáticos</p>
        <% } else if (itinerary === 'auvis') { %>
            <p class="subtitle is-2">Sistemas Audiovisuales</p>
        <% } %>
    <% } %>

    <div class="columns">
        <div class="column is-half">
            <p class="title is-2">1º Semestre</p>
            <% for (var i in subjects) { %>
            <% var subject = subjects[i]; %>
            <% var n = Number(i) + 1; %>
            <% if (subject.semester == 1) { %>

            <div class="box">
                <div class="columns">
                    <div class="column">
                        <a class="is-size-2" href="/tests/<%=subject.subject%>"><%=subject.subject%></a>
                        <p class="subtitle is-4"><%=subject.name%></p>
                        <p class="subtitle is-6">Tests intentados: <%=subject.nTries%></p>
                    </div>
                    <div class="column is-narrow">
                        <canvas id="chart-<%=subject.subject%>" width="75" height="75"></canvas>
                    </div>
                </div>
            </div>

            <script>
                var ctx = document.getElementById('chart-<%=subject.subject%>').getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Aciertos', 'Fallos', 'No contestadas'],
                        datasets: [{
                            data: [<%=subject.hits%>, <%=subject.fails%>, <%=subject.omissions%>],
                            backgroundColor: [
                                'hsl(141, 53%, 53%)',
                                'hsl(348, 100%, 61%)',
                                'hsl(0, 0%, 71%)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        legend: false,
                    }
                });
            </script>

            <% } %>
            <% } %>

        </div>

        <div class="column is-half">
            <p class="title is-2">2º Semestre</p>
            <% for (var i in subjects) { %>
            <% var subject = subjects[i]; %>
            <% var n = Number(i) + 1; %>
            <% if (subject.semester == 2) { %>

            <div class="box">
                <div class="columns">
                    <div class="column">
                        <a class="is-size-2" href="/tests/<%=subject.subject%>"><%=subject.subject%></a>
                        <p class="subtitle is-4"><%=subject.name%></p>
                        <p class="subtitle is-6">Tests intentados: <%=subject.nTries%></p>
                    </div>
                    <div class="column is-narrow">
                        <canvas id="chart-<%=subject.subject%>" width="75" height="75"></canvas>
                    </div>
                </div>
            </div>

            <script>
                var ctx = document.getElementById('chart-<%=subject.subject%>').getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Aciertos', 'Fallos', 'No contestadas'],
                        datasets: [{
                            data: [<%=subject.hits%>, <%=subject.fails%>, <%=subject.omissions%>],
                            backgroundColor: [
                                'hsl(141, 53%, 53%)',
                                'hsl(348, 100%, 61%)',
                                'hsl(0, 0%, 71%)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        legend: false,
                    }
                });
            </script>

            <% } %>
            <% } %>

        </div>
    </div>
</div>